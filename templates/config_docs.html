{% extends "base.html" %}

{% block title %}Configuration Manual{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <h2 class="text-2xl font-bold text-gray-900 mb-6">Configuration Manual</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
        <div class="md:col-span-1">
            <div class="sticky top-8">
                <nav class="bg-white shadow rounded-lg p-4">
                    <div class="space-y-1">
                        <a href="#intro" class="block px-3 py-2 text-sm font-medium rounded-md hover:bg-gray-50 hover:text-gray-900 text-gray-600">Introduction</a>
                        <a href="#structure" class="block px-3 py-2 text-sm font-medium rounded-md hover:bg-gray-50 hover:text-gray-900 text-gray-600">Structure</a>
                        <a href="#steps" class="block px-3 py-2 text-sm font-medium rounded-md hover:bg-gray-50 hover:text-gray-900 text-gray-600">Available Steps</a>
                        <a href="#variables" class="block px-3 py-2 text-sm font-medium rounded-md hover:bg-gray-50 hover:text-gray-900 text-gray-600">Variables</a>
                        <a href="#examples" class="block px-3 py-2 text-sm font-medium rounded-md hover:bg-gray-50 hover:text-gray-900 text-gray-600">Examples</a>
                    </div>
                </nav>
            </div>
        </div>
        
        <div class="md:col-span-3">
            <div class="bg-white shadow rounded-lg p-8 text-base">
                <section id="intro" class="mb-8">
                    <h2 class="text-xl font-bold text-gray-900 mb-4">Introduction</h2>
                    <p class="text-gray-600 leading-relaxed">This manual describes how to create configuration files for new webshops. Each webshop has its own JSON configuration file that defines how prices should be calculated.</p>
                </section>

                <section id="structure" class="mb-8">
                    <h2 class="text-xl font-bold text-gray-900 mb-4">Structure</h2>
                    <p class="text-gray-600 mb-4 leading-relaxed">A configuration file has the following basic structure:</p>
                    <pre class="bg-gray-50 p-4 rounded-lg text-sm font-mono">
{
    "domain": "example.com",
    "categories": {
        "square_meter_price": {
            "steps": [
                // Steps go here
            ]
        },
        "shipping": {
            "steps": [
                // Steps go here
            ]
        }
    }
}</pre>
                </section>

                <section id="steps" class="mb-8">
                    <h2 class="text-xl font-bold text-gray-900 mb-4">Available Steps</h2>
                    
                    <div class="border-t border-gray-200 pt-6 mt-6 first:border-t-0 first:pt-0">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">select</h3>
                        <p class="text-gray-600 mb-4 leading-relaxed">Selects a value from a dropdown or radio button list.</p>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Parameter</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-3 text-sm"><span class="text-red-600 font-medium">selector</span></td>
                                        <td class="px-4 py-3 text-sm text-gray-500">string</td>
                                        <td class="px-4 py-3 text-sm text-gray-500">CSS selector for the element</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3 text-sm"><span class="text-red-600 font-medium">value</span></td>
                                        <td class="px-4 py-3 text-sm text-gray-500">string</td>
                                        <td class="px-4 py-3 text-sm text-gray-500">Value to select (can contain variables)</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3 text-sm"><span class="text-gray-500">unit</span></td>
                                        <td class="px-4 py-3 text-sm text-gray-500">string</td>
                                        <td class="px-4 py-3 text-sm text-gray-500">Unit of the value (mm/cm)</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3 text-sm"><span class="text-gray-500">option_container</span></td>
                                        <td class="px-4 py-3 text-sm text-gray-500">string</td>
                                        <td class="px-4 py-3 text-sm text-gray-500">CSS selector for custom dropdown container</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3 text-sm"><span class="text-gray-500">option_selector</span></td>
                                        <td class="px-4 py-3 text-sm text-gray-500">string</td>
                                        <td class="px-4 py-3 text-sm text-gray-500">CSS selector for custom dropdown options</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <pre class="bg-gray-50 p-4 rounded-lg mt-4 text-sm font-mono">
{
    "type": "select",
    "selector": "#thickness",
    "value": "{thickness}",
    "unit": "mm"
}</pre>
                    </div>

                    <div class="border-t border-gray-200 pt-6 mt-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">input</h3>
                        <p class="text-gray-600 mb-4">Fills a value in an input field.</p>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Parameter</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-3 text-sm"><span class="text-red-600 font-medium">selector</span></td>
                                        <td class="px-4 py-3 text-sm text-gray-500">string</td>
                                        <td class="px-4 py-3 text-sm text-gray-500">CSS selector for the input field</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3 text-sm"><span class="text-red-600 font-medium">value</span></td>
                                        <td class="px-4 py-3 text-sm text-gray-500">string</td>
                                        <td class="px-4 py-3 text-sm text-gray-500">Value to fill in (can contain variables)</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3 text-sm"><span class="text-gray-500">unit</span></td>
                                        <td class="px-4 py-3 text-sm text-gray-500">string</td>
                                        <td class="px-4 py-3 text-sm text-gray-500">Unit of the value (mm/cm)</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <pre class="bg-gray-50 p-4 rounded-lg mt-4 text-sm font-mono">
{
    "type": "input",
    "selector": "#width",
    "value": "{width}",
    "unit": "mm"
}</pre>
                    </div>

                    <div class="border-t border-gray-200 pt-6 mt-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">click</h3>
                        <p class="text-gray-600 mb-4">Clicks on an element.</p>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Parameter</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-3 text-sm"><span class="text-red-600 font-medium">selector</span></td>
                                        <td class="px-4 py-3 text-sm text-gray-500">string</td>
                                        <td class="px-4 py-3 text-sm text-gray-500">CSS selector for the element to click</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <pre class="bg-gray-50 p-4 rounded-lg mt-4 text-sm font-mono">
{
    "type": "click",
    "selector": "#calculate-button"
}</pre>
                    </div>

                    <div class="border-t border-gray-200 pt-6 mt-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">wait</h3>
                        <p class="text-gray-600 mb-4">Waits for a specified time before executing the next step.</p>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Parameter</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-3 text-sm"><span class="text-red-600 font-medium">duration</span></td>
                                        <td class="px-4 py-3 text-sm text-gray-500">string/number</td>
                                        <td class="px-4 py-3 text-sm text-gray-500">Wait time in ms or predefined value</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4 mt-4">
                            <strong class="text-green-800">Predefined wait times:</strong>
                            <ul class="mt-2 space-y-1 text-green-700">
                                <li><code class="bg-green-100 px-1 py-0.5 rounded text-sm">short</code>: 250ms</li>
                                <li><code class="bg-green-100 px-1 py-0.5 rounded text-sm">default</code>: 500ms</li>
                                <li><code class="bg-green-100 px-1 py-0.5 rounded text-sm">long</code>: 1000ms</li>
                                <li><code class="bg-green-100 px-1 py-0.5 rounded text-sm">longer</code>: 2000ms</li>
                            </ul>
                        </div>
                        <pre class="bg-gray-50 p-4 rounded-lg mt-4 text-sm font-mono">
{
    "type": "wait",
    "duration": "long"
}</pre>
                    </div>
                </section>

                <section id="variables" class="mb-8">
                    <h2 class="text-xl font-bold text-gray-900 mb-4">Variables</h2>
                    <p class="text-gray-600 mb-4 leading-relaxed">You can use the following variables in the configuration:</p>
                    <ul class="list-disc pl-5 space-y-2 text-gray-600 mb-4">
                        <li><code class="bg-gray-100 px-1 py-0.5 rounded text-sm">{thickness}</code>: Thickness in mm</li>
                        <li><code class="bg-gray-100 px-1 py-0.5 rounded text-sm">{width}</code>: Width in mm</li>
                        <li><code class="bg-gray-100 px-1 py-0.5 rounded text-sm">{length}</code>: Length in mm</li>
                        <li><code class="bg-gray-100 px-1 py-0.5 rounded text-sm">{quantity}</code>: Number of pieces</li>
                    </ul>
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <p class="text-blue-800"><strong>Note:</strong> The unit of the variables can be adjusted using the <code class="bg-blue-100 px-1 py-0.5 rounded text-sm">unit</code> parameter in the step configuration.</p>
                    </div>
                </section>

                <section id="examples" class="mb-8">
                    <h2 class="text-xl font-bold text-gray-900 mb-4">Examples</h2>
                    <h4 class="text-lg font-medium text-gray-900 mb-4">Example 1: Basic configuration</h4>
                    <div class="step-example">
<pre>{
    "domain": "example.com",
    "categories": {
        "square_meter_price": {
            "steps": [
                {
                    "type": "select",
                    "selector": "#thickness",
                    "value": "{thickness}",
                    "unit": "mm"
                },
                {
                    "type": "wait",
                    "duration": "default"
                },
                {
                    "type": "input",
                    "selector": "#width",
                    "value": "{width}",
                    "unit": "mm"
                },
                {
                    "type": "wait",
                    "duration": "default"
                },
                {
                    "type": "input",
                    "selector": "#length",
                    "value": "{length}",
                    "unit": "mm"
                },
                {
                    "type": "wait",
                    "duration": "default"
                },
                {
                    "type": "read_price",
                    "selector": ".price",
                    "includes_vat": false
                }
            ]
        }
    }
}</pre>
                    </div>

                    <h4 class="text-lg font-medium text-gray-900 mb-4">Example 2: Custom dropdown with extra calculations</h4>
                    <div class="step-example">
<pre>{
    "domain": "example.com",
    "categories": {
        "square_meter_price": {
            "steps": [
                {
                    "type": "select",
                    "selector": ".thickness-select",
                    "option_container": ".thickness-options",
                    "option_selector": "li[data-value='{value}']",
                    "value": "{thickness}",
                    "unit": "mm"
                },
                {
                    "type": "wait",
                    "duration": "long"
                },
                {
                    "type": "input",
                    "selector": "#dimensions input:first-child",
                    "value": "{width}",
                    "unit": "cm"
                },
                {
                    "type": "wait",
                    "duration": "short"
                },
                {
                    "type": "input",
                    "selector": "#dimensions input:last-child",
                    "value": "{length}",
                    "unit": "cm"
                },
                {
                    "type": "click",
                    "selector": "#calculate"
                },
                {
                    "type": "wait",
                    "duration": "default"
                },
                {
                    "type": "read_price",
                    "selector": "#total-price",
                    "includes_vat": true,
                    "calculation": {
                        "divide_by": 100
                    }
                }
            ]
        }
    }
}</pre>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>
{% endblock %} 